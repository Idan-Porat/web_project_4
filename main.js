!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r,o,i,a,u){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"counterLikes",(function(e){c._likes=e,c._updateLikesCount(),c.isLikedByUser()?c._likeBtn.classList.add("elements__like-button_active"):c._likeBtn.classList.remove("elements__like-button_active")})),t(this,"_updateLikesCount",(function(){c._element.querySelector(".element__like-counter").textContent=c._likes.length})),t(this,"_toggleLike",(function(){c._element.querySelector(".elements__like-button").classList.toggle("elements__like-button_active")})),this._title=e.name,this._image=e.link,this._template=r,this._handleCardClick=o,this._handleDelete=i,this._userId=u,this._handleLike=a,this._id=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._userId=u,this._cardTemplate=document.querySelector(this._template).content.querySelector(".elements__card")}var r,o;return r=n,(o=[{key:"generateCard",value:function(){return this._element=this._cardTemplate.cloneNode(!0),this._setEventListeners(),this._element.querySelector(".elements__pic").style.backgroundImage="url(".concat(this._image,")"),this._element.querySelector(".elements__title").textContent=this._title,this.counterLikes(this._likes),this._ownerId!==this._userId&&(this._deleteBtn.style.display="none"),this._element}},{key:"isLikedByUser",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__pic").addEventListener("click",(function(){return e._handleCardClick()})),this._likeBtn=this._element.querySelector(".elements__like-button"),this._likeBtn.addEventListener("click",(function(){return e._handleLike(e._id)})),this._deleteBtn=this._element.querySelector(".elements__delete-button"),this._deleteBtn.addEventListener("click",(function(){return e._handleDelete(e._id)}))}},{key:"removeCard",value:function(){this._element.remove()}}])&&e(r.prototype,o),n}(),r=n;function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.closePopup()},(n="_closeOverlayByEsc")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._openPopupClass="popup_open"}var t,n;return t=e,(n=[{key:"openPopup",value:function(){document.addEventListener("keydown",this._closeOverlayByEsc),this._popup.classList.add(this._openPopupClass)}},{key:"closePopup",value:function(){this._popup.classList.remove(this._openPopupClass),document.removeEventListener("keydown",this._closeOverlayByEsc)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains(e._openPopupClass)||t.target.classList.contains("popup__close-button"))&&e.closePopup()}))}}])&&o(t.prototype,n),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},c(e,t,n||e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._picElement=t._popup.querySelector(".popup__open-image"),t._captionpicElement=t._popup.querySelector(".popup__open-image-caption"),t}return t=a,(n=[{key:"openPopup",value:function(e){var t=e.link,n=e.name;this._picElement.src=t,this._picElement.alt=n,this._captionpicElement.textContent=n,c(f(a.prototype),"openPopup",this).call(this)}}])&&u(t.prototype,n),a}(i);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},y(e,t,n||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),S(b(n=i.call(this,e)),"showLoadingProgress",(function(){n._submitBtn.textContent="Saving..."})),S(b(n),"onLoadFinish",(function(){n._submitBtn.textContent=n._submitBtnContent})),n._submitForm=t,n._form=n._popup.querySelector(".popup__input-container"),n._submitBtn=n._form.querySelector(".popup__submit-button"),n._submitBtnContent=n._submitBtn.textContent,n}return t=a,(n=[{key:"closePopup",value:function(){y(g(a.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;y(g(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues())}))}},{key:"_getInputValues",value:function(){var e,t=function(e){if(Array.isArray(e))return d(e)}(e=this._form.querySelectorAll(".popup__item"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n={};return t.forEach((function(e){n[e.name]=e.value})),n}}])&&h(t.prototype,n),a}(i);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},P(e,t,n||e)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function C(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(){var e;k(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return I(j(e=i.call.apply(i,[this].concat(n))),"setAction",(function(t){e._submitHandler=t})),e}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;P(q(a.prototype),"setEventListeners",this).call(this),this._popup.querySelector(".popup__input-container").addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()}))}}])&&L(t.prototype,n),a}(i);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(){function e(t,n){var r=this,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"addItem",(function(e){r._container.prepend(e)})),U(this,"renderItems",(function(e){e.forEach((function(e){r._renderer(e)}))})),this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}}])&&B(t.prototype,n),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t){var n,r,o=this,i=t.nameSelector,a=t.careerSelector,u=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){return{name:o._name.textContent,career:o._career.textContent,avatar:o._avatar.src}},(n="getUserInfo")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._nameSelector=i,this._careerSelector=a,this._avatarSelector=u,this._name=document.querySelector(this._nameSelector),this._career=document.querySelector(this._careerSelector),this._avatar=document.querySelector(this._avatarSelector)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.fullName,n=e.career;this._name.textContent=t,this._career.textContent=n}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&T(t.prototype,n),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"_showInputError",(function(e,t){var n=r._config,o=n.errorClass,i=n.errorInputSelector,a=r._formElement.querySelector(".".concat(e.id,"-error"));a.textContent=t,a.classList.add(o),e.classList.add(i)})),M(this,"_hideInputError",(function(e){var t=r._config,n=(t.inputErrorClass,t.errorClass),o=t.errorInputSelector,i=r._formElement.querySelector(".".concat(e.id,"-error"));i.classList.remove(n),e.classList.remove(o),i.textContent=""})),M(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),M(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),M(this,"_toggleButtonState",(function(){var e=r._config,t=e.inactiveButtonClass,n=e.submitButtonSelector;r._buttonElement=r._formElement.querySelector(n),r._hasInvalidInput()?(r._buttonElement.disabled=!0,r._buttonElement.classList.add(t)):(r._buttonElement.classList.remove(t),r._buttonElement.disabled=!1)})),M(this,"_setEventListeners",(function(){var e=r._config.inputSelector;r._inputList=Array.from(r._formElement.querySelectorAll(e)),r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),M(this,"resetValidation",(function(){Array.from(r._inputList),r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._config=t,this._formElement=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&x(t.prototype,n),e}(),N=(document.querySelector(".profile__full-name"),document.querySelector(".profile__career"),document.querySelector(".profile__button")),W=document.querySelector(".profile__rectangle"),F=document.querySelector(".popup__item_type_name"),H=document.querySelector(".popup__item_type_career"),J=(document.querySelector(".popup__item_type_photo-title"),document.querySelector(".popup__item_type_url"),document.querySelector(".popup__item_type_avatar")),$=document.querySelector(".popup_theme_edit"),z=document.querySelector(".popup_theme_edit-avatar"),G=($.querySelector(".popup__close-button"),document.querySelector(".popup_theme_open-photo")),K=(G.querySelector(".popup__close-button"),document.querySelector(".popup_theme_add-photo")),Q=(K.querySelector(".popup__close-button"),document.querySelector(".popup"),document.querySelector(".popup__container"),G.querySelector(".popup__open-image"),document.querySelector(".popup__open-image-caption"),document.querySelector("#elements__template").content,document.querySelector(".elements__container"),document.querySelector(".popup__input-container"),document.querySelectorAll(".elements__pic"),document.querySelector(".elements__delete-button"),document.querySelector(".avatar__edit")),X=(document.querySelector(".popup_theme_edit-avatar"),"#elements__template"),Y={formSelector:".popup",inputSelectorSet:".popup__set",inputSelector:".popup__item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__item-error",errorClass:"popup__item-error_active",errorInputSelector:"popup__item_theme_red",imageModalWindow:".popup_theme_open-photo",editModalWindow:".popup_theme_edit",addPhotoModalWindow:".popup_theme_add-photo",editAvatarModalWindow:".popup_theme_edit-avatar",deleteCardModalWindow:".popup_theme_delete-photo",elementsContainer:".elements__container"},Z=new V(Y,$),ee=new V(Y,K),te=new V(Y,z);function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie,ae=new(function(){function e(t){var n=this,r=t.baseURL,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re(this,"getInitialCards",(function(){return fetch("".concat(n._baseURL,"/cards"),{headers:n._headers}).then((function(e){return n._getResponseData(e)}))})),re(this,"getUserInfo",(function(){return fetch("".concat(n._baseURL,"/users/me"),{headers:n._headers}).then((function(e){return n._getResponseData(e)}))})),re(this,"createNewCard",(function(e){return fetch("".concat(n._baseURL,"/cards"),{headers:n._headers,method:"POST",body:JSON.stringify(e)}).then((function(e){return n._getResponseData(e)}))})),re(this,"deleteCard",(function(e){return fetch("".concat(n._baseURL,"/cards/").concat(e),{headers:n._headers,method:"DELETE"}).then((function(e){return n._getResponseData(e)}))})),re(this,"setUserInfo",(function(e){var t=e.name,r=e.about;return fetch("".concat(n._baseURL,"/users/me"),{headers:n._headers,method:"PATCH",body:JSON.stringify({name:t,about:r})}).then((function(e){return n._getResponseData(e)}))})),re(this,"setUserImage",(function(e){return fetch("".concat(n._baseURL,"/users/me/avatar"),{headers:n._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return n._getResponseData(e)}))})),re(this,"likeCard",(function(e){return fetch("".concat(n._baseURL,"/cards/likes/").concat(e),{headers:n._headers,method:"PUT"}).then((function(e){return n._getResponseData(e)}))})),re(this,"unlikeCard",(function(e){return fetch("".concat(n._baseURL,"/cards/likes/").concat(e),{headers:n._headers,method:"DELETE"}).then((function(e){return n._getResponseData(e)}))})),this._baseURL=r,this._headers=o}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}}])&&ne(t.prototype,n),e}())({baseURL:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"001651b9-e63d-4f3d-8d65-ab968b3111ee","Content-Type":"application/json"}});Promise.all([ae.getInitialCards(),ae.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ue.setUserInfo({fullName:i.name,career:i.about}),ue.setUserAvatar(i.avatar),ie=i._id,de.renderItems(o)})).catch((function(e){console.log(e)})),ee.enableValidation(),Z.enableValidation(),te.enableValidation();var ue=new D({nameSelector:".profile__full-name",careerSelector:".profile__career",avatarSelector:".avatar__image"});N.addEventListener("click",(function(){var e=ue.getUserInfo();F.value=e.name,H.value=e.career,Z.resetValidation(),se.openPopup()})),W.addEventListener("click",(function(){ee.resetValidation(),fe.openPopup()})),Q.addEventListener("click",(function(){var e=ue.getUserInfo();J.value=e.avatar,te.resetValidation(),pe.openPopup()}));var ce=new p(Y.imageModalWindow),le=new R(Y.deleteCardModalWindow),se=new w(Y.editModalWindow,(function(e){se.showLoadingProgress(),ae.setUserInfo({name:e.fullName,about:e.career}).then((function(e){ue.setUserInfo({fullName:e.name,career:e.about}),se.closePopup()})).catch((function(e){console.log(e)})).finally((function(){return se.onLoadFinish()}))})),fe=new w(Y.addPhotoModalWindow,(function(e){fe.showLoadingProgress(),ae.createNewCard({name:e.title,link:e.link}).then((function(e){var t=_e(e,X);de.addItem(t),fe.closePopup()})).catch((function(e){console.log(e)})).finally((function(){return fe.onLoadFinish()}))})),pe=new w(Y.editAvatarModalWindow,(function(e){pe.showLoadingProgress(),ae.setUserImage(e.image).then((function(e){ue.setUserAvatar(e.avatar),pe.closePopup()})).catch((function(e){console.log(e)})).finally((function(){return pe.onLoadFinish()}))}));function _e(e,t){var n=new r(e,t,(function(){return ce.openPopup(e)}),(function(e){le.openPopup(),le.setAction((function(){ae.deleteCard(e).then((function(){n.removeCard(),le.closePopup()})).catch((function(e){console.log(e)}))}))}),(function(e){n.isLikedByUser()?ae.unlikeCard(e).then((function(e){return n.counterLikes(e.likes)})).catch((function(e){console.log(e)})):ae.likeCard(e).then((function(e){return n.counterLikes(e.likes)})).catch((function(e){console.log(e)}))}),ie);return n.generateCard()}var de=new A({renderer:function(e){var t=_e(e,X);de.addItem(t)}},Y.elementsContainer);ce.setEventListeners(),se.setEventListeners(),fe.setEventListeners(),pe.setEventListeners(),le.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TCxHQUFxQk0scUJBTXhDLFNBQVNDLEdBQWNuSCxFQUFNc0QsR0FDM0IsSUFBTW1FLEVBQWUsSUFBSWxOLEVBQUt5RixFQUFNc0QsR0FDbEMsa0JBQU11RCxHQUFnQkgsVUFBVTFHLE1BQU8sU0FBQzBCLEdBQ3RDb0YsR0FBZ0JKLFlBRWhCSSxHQUFnQlksV0FBVSxXQUN4QnZELEdBQUl3RCxXQUFXakcsR0FDWmdELE1BQUssV0FDSitDLEVBQWFHLGFBQ2JkLEdBQWdCcEosZ0JBRWpCeUksT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixZQUlsQixTQUFDMUUsR0FDSStGLEVBQWF4TSxnQkFRaEJrSixHQUFJMEQsV0FBV25HLEdBQ1pnRCxNQUFLLFNBQUNDLEdBQUQsT0FBUzhDLEVBQWF6SyxhQUFhMkgsRUFBSXJJLFVBQzVDNkosT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQVZoQmpDLEdBQUkyRCxTQUFTcEcsR0FDVmdELE1BQUssU0FBQ0MsR0FBRCxPQUFTOEMsRUFBYXpLLGFBQWEySCxFQUFJckksVUFDNUM2SixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLFFBVWpCdkwsSUFFTCxPQUFPNE0sRUFBYU0sZUFFdEIsSUFBTTlCLEdBQVcsSUFBSXhHLEVBQVEsQ0FDM0JFLFNBQVUsU0FBQ0ssR0FDVCxJQUFNZ0ksRUFBT2IsR0FBY25ILEVBQU1zRCxHQUVqQzJDLEdBQVNxQixRQUFRVSxLQUVsQnpFLEVBQVlRLG1CQUdmOEMsR0FBZ0JvQixvQkFDaEJ4QixHQUFpQndCLG9CQUNqQnRCLEdBQWNzQixvQkFDZHJCLEdBQXFCcUIsb0JBQ3JCbkIsR0FBZ0JtQixvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwRm9yRGVsZXRlQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlLCBoYW5kbGVMaWtlLCB1c2VySWQpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGljXCIpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9pbWFnZX0pYDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyTGlrZXModGhpcy5fbGlrZXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBjb3VudGVyTGlrZXMgPSAodXBkYXRlZExpa2VzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSB1cGRhdGVkTGlrZXM7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0xpa2VkQnlVc2VyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0xpa2VkQnlVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZClcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gT3BlbiBwb3B1cCBpbWFnZS5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3BpY1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xyXG5cclxuICAgICAgICAvLyBMaWtlIGJ1dHRvbi5cclxuICAgICAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZSh0aGlzLl9pZCkpO1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgY2FyZCBmcm9tIHRoZSBnYWxsZXJ5LlxyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLl9pZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVMaWtlc0NvdW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVMaWtlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIikuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fb3BlblBvcHVwQ2xhc3MgPSAncG9wdXBfb3Blbic7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9jbG9zZU92ZXJsYXlCeUVzYyA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Qb3B1cCgpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU92ZXJsYXlCeUVzYyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcGVuUG9wdXBDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VQb3B1cCgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wZW5Qb3B1cENsYXNzKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZU92ZXJsYXlCeUVzYyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9vcGVuUG9wdXBDbGFzcykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3BpY0VsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuLWltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb25waWNFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3Blbi1pbWFnZS1jYXB0aW9uXCIpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5Qb3B1cCh7IGxpbmssIG5hbWUgfSkge1xyXG4gICAgICAgIHRoaXMuX3BpY0VsZW1lbnQuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9waWNFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbnBpY0VsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dC1jb250YWluZXJcIik7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bkNvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VQb3B1cCgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dMb2FkaW5nUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH1cclxuXHJcbiAgICBvbkxvYWRGaW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnRuQ29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dFBvcHVwSW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJyldO1xyXG4gICAgICAgIGNvbnN0IGlucHV0UG9wdXBWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgdGV4dFBvcHVwSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0UG9wdXBWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXRQb3B1cFZhbHVlcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBGb3JEZWxldGVDYXJkIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgc2V0QWN0aW9uID0gKGZ1bmMpID0+IHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gZnVuYztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWNvbnRhaW5lclwiKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zID0gKGl0ZW1zKSA9PiB7XHJcblxyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgY2FyZWVyU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBuYW1lU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fY2FyZWVyU2VsZWN0b3IgPSBjYXJlZXJTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9hdmF0YXJTZWxlY3RvciA9IGF2YXRhclNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX25hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fY2FyZWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJlZXJTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9hdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCwgY2FyZWVyOiB0aGlzLl9jYXJlZXIudGV4dENvbnRlbnQsIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHsgZnVsbE5hbWUsIGNhcmVlciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGZ1bGxOYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmVlci50ZXh0Q29udGVudCA9IGNhcmVlcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB9XHJcbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgeyBlcnJvckNsYXNzLCBlcnJvcklucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9ySW5wdXRTZWxlY3Rvcik7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzLCBlcnJvcklucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JJbnB1dFNlbGVjdG9yKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcywgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9jb25maWc7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRBcnJheSA9IEFycmF5LmZyb20odGhpcy5faW5wdXRMaXN0KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZ1bGxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Z1bGwtbmFtZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2NhcmVlcicpO1xyXG5leHBvcnQgY29uc3Qgb3BlbkVkaXRQcm9maWxlUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBvcGVuQWRkQ2FyZFBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3JlY3RhbmdsZScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0Q2FyZWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfY2FyZWVyJyk7XHJcbmV4cG9ydCBjb25zdCBuZXdQaG90b1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfcGhvdG8tdGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IG5ld1Bob3RvVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfdXJsJyk7XHJcbmV4cG9ydCBjb25zdCBpbnB1dEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX2F2YXRhcicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90aGVtZV9lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3RoZW1lX2VkaXQtYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VFZGl0Rm9ybSA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90aGVtZV9vcGVuLXBob3RvXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VQb3B1cEltYWdlID0gcG9wdXBQaG90by5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgYWRkUGhvdG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90aGVtZV9hZGQtcGhvdG9cIik7XHJcbmV4cG9ydCBjb25zdCBjbG9zZUFkZFBob3RvRm9ybSA9IGFkZFBob3RvRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBwb3B1cFBob3RvLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX29wZW4taW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cE9wZW5JbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuLWltYWdlLWNhcHRpb25cIik7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnRzX190ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5leHBvcnQgY29uc3QgZWxlbWVudHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jb250YWluZXJcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cElucHV0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXQtY29udGFpbmVyXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lbGVtZW50c19fcGljXCIpO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBvcGVuRWRpdEF2YXRhclBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF2YXRhcl9fZWRpdCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfZWRpdC1hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50U2VsZWN0b3JUZW1wbGF0ZSA9IFwiI2VsZW1lbnRzX190ZW1wbGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cFwiLFxyXG4gICAgaW5wdXRTZWxlY3RvclNldDogXCIucG9wdXBfX3NldFwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2l0ZW1cIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pdGVtLWVycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19pdGVtLWVycm9yX2FjdGl2ZVwiLFxyXG4gICAgZXJyb3JJbnB1dFNlbGVjdG9yOiBcInBvcHVwX19pdGVtX3RoZW1lX3JlZFwiLFxyXG4gICAgaW1hZ2VNb2RhbFdpbmRvdzogJy5wb3B1cF90aGVtZV9vcGVuLXBob3RvJyxcclxuICAgIGVkaXRNb2RhbFdpbmRvdzonLnBvcHVwX3RoZW1lX2VkaXQnLFxyXG4gICAgYWRkUGhvdG9Nb2RhbFdpbmRvdzonLnBvcHVwX3RoZW1lX2FkZC1waG90bycsXHJcbiAgICBlZGl0QXZhdGFyTW9kYWxXaW5kb3c6Jy5wb3B1cF90aGVtZV9lZGl0LWF2YXRhcicsXHJcbiAgICBkZWxldGVDYXJkTW9kYWxXaW5kb3c6Jy5wb3B1cF90aGVtZV9kZWxldGUtcGhvdG8nLFxyXG4gICAgZWxlbWVudHNDb250YWluZXI6IFwiLmVsZW1lbnRzX19jb250YWluZXJcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQ29uZmlnID0ge1xyXG4gICAgcHJvZmlsZVRpdGxlOiAnLnByb2ZpbGVfX2Z1bGwtbmFtZScsXHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb246ICcucHJvZmlsZV9fY2FyZWVyJyxcclxuICAgIGF2YXRhckltYWdlOicuYXZhdGFyX19pbWFnZScsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwQ29uZmlnLCBlZGl0Rm9ybSk7XHJcbmV4cG9ydCBjb25zdCBhZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cENvbmZpZywgYWRkUGhvdG9Gb3JtKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwQ29uZmlnLCBlZGl0QXZhdGFyRm9ybSk7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCJcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBGb3JEZWxldGVDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBGb3JEZWxldGVDYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgeyBjbG9zZVBvcHVwLCBvcGVuUG9wdXAgfSBmcm9tICcuLi91dGlscy91dGlsaXRpZXMuanMnO1xyXG5pbXBvcnQgeyBlbGVtZW50U2VsZWN0b3JUZW1wbGF0ZSwgZWRpdFBvcHVwQXZhdGFyLCBhZGRQaG90b0Zvcm0sIG9wZW5FZGl0QXZhdGFyUG9wdXBCdG4sIG9wZW5BZGRDYXJkUG9wdXBCdG4sIG9wZW5FZGl0UHJvZmlsZVBvcHVwQnRuLCBlZGl0Rm9ybSwgZWRpdEF2YXRhckZvcm0sIGVkaXRWYWxpZGF0b3IsIGF2YXRhclZhbGlkYXRvciwgbmV3UGhvdG9UaXRsZSwgbmV3UGhvdG9VcmwsIGlucHV0QXZhdGFyLCBhZGRWYWxpZGF0b3IsIGlucHV0TmFtZSwgaW5wdXRDYXJlZXIsIHBvcHVwQ29uZmlnLCBwcm9maWxlQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVVJMOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjAwMTY1MWI5LWU2M2QtNGYzZC04ZDY1LWFiOTY4YjMxMTFlZVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9XHJcbn0pO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgZnVsbE5hbWU6IHVzZXJEYXRhLm5hbWUsIGNhcmVlcjogdXNlckRhdGEuYWJvdXQgfSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5hZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZVNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVUaXRsZSwgY2FyZWVyU2VsZWN0b3I6IHByb2ZpbGVDb25maWcucHJvZmlsZURlc2NyaXB0aW9uLCBhdmF0YXJTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5hdmF0YXJJbWFnZSB9KTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cEVkaXQoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgaW5wdXRDYXJlZXIudmFsdWUgPSB1c2VyRGF0YS5jYXJlZXI7XHJcblxyXG4gIGVkaXRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlblBvcHVwKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cEVkaXRBdmF0YXIoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0QXZhdGFyLnZhbHVlID0gdXNlckRhdGEuYXZhdGFyO1xyXG5cclxuICBhdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4gIGVkaXRBdmF0YXJQaG90b1BvcHVwLm9wZW5Qb3B1cCgpO1xyXG59XHJcblxyXG5cclxub3BlbkVkaXRQcm9maWxlUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cEVkaXQpO1xyXG5vcGVuQWRkQ2FyZFBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVBZGRQaG90b0NsaWNrKTtcclxub3BlbkVkaXRBdmF0YXJQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblBvcHVwRWRpdEF2YXRhcik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRQaG90b0NsaWNrKCkge1xyXG4gIGFkZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRQaG90b1BvcHVwLm9wZW5Qb3B1cCgpO1xyXG59XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDb25maWcuaW1hZ2VNb2RhbFdpbmRvdyk7XHJcbmNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBQb3B1cEZvckRlbGV0ZUNhcmQocG9wdXBDb25maWcuZGVsZXRlQ2FyZE1vZGFsV2luZG93KTtcclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLmVkaXRNb2RhbFdpbmRvdywgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5zaG93TG9hZGluZ1Byb2dyZXNzKCk7XHJcbiAgYXBpLnNldFVzZXJJbmZvKHsgbmFtZTogaW5wdXRWYWx1ZXMuZnVsbE5hbWUsIGFib3V0OiBpbnB1dFZhbHVlcy5jYXJlZXIgfSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgZnVsbE5hbWU6IHJlcy5uYW1lLCBjYXJlZXI6IHJlcy5hYm91dCB9KVxyXG5cclxuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IGVkaXRQcm9maWxlUG9wdXAub25Mb2FkRmluaXNoKCkpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFkZFBob3RvUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENvbmZpZy5hZGRQaG90b01vZGFsV2luZG93LCAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICBhZGRQaG90b1BvcHVwLnNob3dMb2FkaW5nUHJvZ3Jlc3MoKTtcclxuICBhcGkuY3JlYXRlTmV3Q2FyZCh7bmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsIGxpbms6IGlucHV0VmFsdWVzLmxpbmt9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZU5ld0NhcmQocmVzLCBlbGVtZW50U2VsZWN0b3JUZW1wbGF0ZSlcclxuXHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgIGFkZFBob3RvUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gYWRkUGhvdG9Qb3B1cC5vbkxvYWRGaW5pc2goKSk7XHJcbn0pO1xyXG5jb25zdCBlZGl0QXZhdGFyUGhvdG9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLmVkaXRBdmF0YXJNb2RhbFdpbmRvdywgKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgZWRpdEF2YXRhclBob3RvUG9wdXAuc2hvd0xvYWRpbmdQcm9ncmVzcygpO1xyXG4gIGFwaS5zZXRVc2VySW1hZ2UoaW5wdXRWYWx1ZXMuaW1hZ2UpXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpXHJcblxyXG4gICAgICBlZGl0QXZhdGFyUGhvdG9Qb3B1cC5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiBlZGl0QXZhdGFyUGhvdG9Qb3B1cC5vbkxvYWRGaW5pc2goKSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZChpdGVtLCBlbGVtZW50U2VsZWN0b3JUZW1wbGF0ZSkge1xyXG4gIGNvbnN0IGNhcmRJbnN0YW5jZSA9IG5ldyBDYXJkKGl0ZW0sIGVsZW1lbnRTZWxlY3RvclRlbXBsYXRlLFxyXG4gICAgKCkgPT4gaW1hZ2VQb3B1cE1vZGFsLm9wZW5Qb3B1cChpdGVtKSwgKGlkKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNhcmRNb2RhbC5vcGVuUG9wdXAoKTtcclxuXHJcbiAgICAgIGRlbGV0ZUNhcmRNb2RhbC5zZXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkSW5zdGFuY2UucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgICBkZWxldGVDYXJkTW9kYWwuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgICwgKGlkKSA9PiB7XHJcbiAgICAgIGlmICghY2FyZEluc3RhbmNlLmlzTGlrZWRCeVVzZXIoKSkge1xyXG4gICAgICAgIGFwaS5saWtlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IGNhcmRJbnN0YW5jZS5jb3VudGVyTGlrZXMocmVzLmxpa2VzKSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBhcGkudW5saWtlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IGNhcmRJbnN0YW5jZS5jb3VudGVyTGlrZXMocmVzLmxpa2VzKSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSwgdXNlcklkKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRJbnN0YW5jZS5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVOZXdDYXJkKGl0ZW0sIGVsZW1lbnRTZWxlY3RvclRlbXBsYXRlKTtcclxuXHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xyXG4gIH1cclxufSwgcG9wdXBDb25maWcuZWxlbWVudHNDb250YWluZXIpO1xyXG5cclxuXHJcbmltYWdlUG9wdXBNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZFBob3RvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdEF2YXRhclBob3RvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZGVsZXRlQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGJhc2VVUkwsIGhlYWRlcnMgfSkge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG4gICAgY3JlYXRlTmV3Q2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvID0gKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbWFnZSA9IChhdmF0YXIpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGxpa2VDYXJkID0gKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgdW5saWtlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVMaWtlIiwidXNlcklkIiwidXBkYXRlZExpa2VzIiwiX2xpa2VzIiwiX3VwZGF0ZUxpa2VzQ291bnQiLCJpc0xpa2VkQnlVc2VyIiwiX2xpa2VCdG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsInRvZ2dsZSIsInRoaXMiLCJfdGl0bGUiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlIiwiX3VzZXJJZCIsIl9oYW5kbGVMaWtlIiwiX2lkIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY291bnRlckxpa2VzIiwiX2RlbGV0ZUJ0biIsImRpc3BsYXkiLCJzb21lIiwidXNlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJlIiwia2V5IiwiY2xvc2VQb3B1cCIsIl9wb3B1cCIsIl9vcGVuUG9wdXBDbGFzcyIsIl9jbG9zZU92ZXJsYXlCeUVzYyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BpY0VsZW1lbnQiLCJfY2FwdGlvbnBpY0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuQ29udGVudCIsIl9zdWJtaXRGb3JtIiwiX2Zvcm0iLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwidGV4dFBvcHVwSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0UG9wdXBWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsIlBvcHVwRm9yRGVsZXRlQ2FyZCIsImZ1bmMiLCJfc3VibWl0SGFuZGxlciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiZWxlbWVudCIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiX3JlbmRlcmVyIiwiaW5uZXJIVE1MIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJjYXJlZXJTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWUiLCJjYXJlZXIiLCJfY2FyZWVyIiwiYXZhdGFyIiwiX2F2YXRhciIsIl9uYW1lU2VsZWN0b3IiLCJfY2FyZWVyU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJmdWxsTmFtZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsIl9jb25maWciLCJlcnJvckNsYXNzIiwiZXJyb3JJbnB1dFNlbGVjdG9yIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRMaXN0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJpbnB1dFNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIm9wZW5FZGl0UHJvZmlsZVBvcHVwQnRuIiwib3BlbkFkZENhcmRQb3B1cEJ0biIsImlucHV0TmFtZSIsImlucHV0Q2FyZWVyIiwiaW5wdXRBdmF0YXIiLCJlZGl0Rm9ybSIsImVkaXRBdmF0YXJGb3JtIiwicG9wdXBQaG90byIsImFkZFBob3RvRm9ybSIsIm9wZW5FZGl0QXZhdGFyUG9wdXBCdG4iLCJlbGVtZW50U2VsZWN0b3JUZW1wbGF0ZSIsInBvcHVwQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvclNldCIsImltYWdlTW9kYWxXaW5kb3ciLCJlZGl0TW9kYWxXaW5kb3ciLCJhZGRQaG90b01vZGFsV2luZG93IiwiZWRpdEF2YXRhck1vZGFsV2luZG93IiwiZGVsZXRlQ2FyZE1vZGFsV2luZG93IiwiZWxlbWVudHNDb250YWluZXIiLCJlZGl0VmFsaWRhdG9yIiwiYWRkVmFsaWRhdG9yIiwiYXZhdGFyVmFsaWRhdG9yIiwiYXBpIiwiQXBpIiwiYmFzZVVSTCIsImhlYWRlcnMiLCJmZXRjaCIsIl9iYXNlVVJMIiwiX2hlYWRlcnMiLCJ0aGVuIiwicmVzIiwiX2dldFJlc3BvbnNlRGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYWJvdXQiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiY2FyZHMiLCJ1c2VyRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwib3BlblBvcHVwIiwiYWRkUGhvdG9Qb3B1cCIsImVkaXRBdmF0YXJQaG90b1BvcHVwIiwiaW1hZ2VQb3B1cE1vZGFsIiwiZGVsZXRlQ2FyZE1vZGFsIiwiaW5wdXRWYWx1ZXMiLCJzaG93TG9hZGluZ1Byb2dyZXNzIiwiZmluYWxseSIsIm9uTG9hZEZpbmlzaCIsImNyZWF0ZU5ld0NhcmQiLCJ0aXRsZSIsIm5ld0NhcmQiLCJhZGRJdGVtIiwic2V0VXNlckltYWdlIiwiaW1hZ2UiLCJjYXJkSW5zdGFuY2UiLCJzZXRBY3Rpb24iLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsInVubGlrZUNhcmQiLCJsaWtlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImNhcmQiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=