!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){var o,i,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=function(){u._element.querySelector(".elements__like-button").classList.toggle("elements__like-button_active")},(o="_toggleLike")in this?Object.defineProperty(this,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[o]=i,this._title=e.name,this._image=e.link,this._template=n,this._handleCardClick=r,this._cardTemplate=document.querySelector(this._template).content.querySelector(".elements__card")}var n,r;return n=t,(r=[{key:"generateCard",value:function(){return this._element=this._cardTemplate.cloneNode(!0),this._setEventListeners(),this._element.querySelector(".elements__pic").style.backgroundImage="url(".concat(this._image,")"),this._element.querySelector(".elements__title").textContent=this._title,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__pic").addEventListener("click",(function(){return e._handleCardClick()})),this._element.querySelector(".elements__like-button").addEventListener("click",(function(){e._toggleLike()})),this._element.querySelector(".elements__delete-button").addEventListener("click",(function(){e._removeCard()}))}},{key:"_removeCard",value:function(){this._element.remove()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.closePopup()},(n="_closeOverlayByEsc")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._openPopupClass="popup_open"}var t,r;return t=e,(r=[{key:"openPopup",value:function(){document.addEventListener("keydown",this._closeOverlayByEsc),this._popup.classList.add(this._openPopupClass)}},{key:"closePopup",value:function(){this._popup.classList.remove(this._openPopupClass),document.removeEventListener("keydown",this._closeOverlayByEsc)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains(e._openPopupClass)||t.target.classList.contains("popup__close-button"))&&e.closePopup()}))}}])&&n(t.prototype,r),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},u(e,t,n||e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,n,r,o,s=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(o){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=s.call(this,e))._picElement=t._popup.querySelector(".popup__open-image"),t._captionpicElement=t._popup.querySelector(".popup__open-image-caption"),t}return t=p,(n=[{key:"openPopup",value:function(e){var t=e.link,n=e.name;this._picElement.src=t,this._picElement.alt=n,this._captionpicElement.textContent=n,u(l(p.prototype),"openPopup",this).call(this)}}])&&i(t.prototype,n),p}(r);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},m(e,t,n||e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitForm=t,n._form=n._popup.querySelector(".popup__input-container"),n}return t=u,(n=[{key:"closePopup",value:function(){m(h(u.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;m(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues())}))}},{key:"_getInputValues",value:function(){var e,t=function(e){if(Array.isArray(e))return f(e)}(e=this._form.querySelectorAll(".popup__item"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n={};return t.forEach((function(e){n[e.name]=e.value})),n}}])&&_(t.prototype,n),u}(r);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){var r,o,i=this,u=t.data,a=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){i._container.prepend(e)},(r="addItem")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._renderedItems=u,this._renderer=a,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&b(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n,r,o=this,i=t.nameSelector,u=t.carrerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){return{name:o._name.textContent,carrer:o._carrer.textContent}},(n="getUserInfo")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._nameSelector=i,this._carrerSelector=u,this._name=document.querySelector(this._nameSelector),this._carrer=document.querySelector(this._carrerSelector)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.fullName,n=e.carrer;this._name.textContent=t,this._carrer.textContent=n}}])&&w(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"_showInputError",(function(e,t){var n=r._config,o=n.errorClass,i=n.errorInputSelector,u=r._formElement.querySelector(".".concat(e.id,"-error"));u.textContent=t,u.classList.add(o),e.classList.add(i)})),k(this,"_hideInputError",(function(e){var t=r._config,n=(t.inputErrorClass,t.errorClass),o=t.errorInputSelector,i=r._formElement.querySelector(".".concat(e.id,"-error"));i.classList.remove(n),e.classList.remove(o),i.textContent=""})),k(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),k(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),k(this,"_toggleButtonState",(function(){var e=r._config,t=e.inactiveButtonClass,n=e.submitButtonSelector;r._buttonElement=r._formElement.querySelector(n),r._hasInvalidInput()?(r._buttonElement.disabled=!0,r._buttonElement.classList.add(t)):(r._buttonElement.classList.remove(t),r._buttonElement.disabled=!1)})),k(this,"_setEventListeners",(function(){var e=r._config.inputSelector;r._inputList=Array.from(r._formElement.querySelectorAll(e)),r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),k(this,"resetValidation",(function(){Array.from(r._inputList),r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._config=t,this._formElement=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&E(t.prototype,n),e}(),L=(document.querySelector(".profile__full-name"),document.querySelector(".profile__career"),document.querySelector(".profile__button"),document.querySelector(".profile__rectangle"),document.querySelector(".popup__item_type_name")),O=document.querySelector(".popup__item_type_career"),j=document.querySelector(".popup__item_type_photo-title"),P=document.querySelector(".popup__item_type_url"),C=document.querySelector(".popup_theme_edit"),x=(C.querySelector(".popup__close-button"),document.querySelector(".popup_theme_open-photo")),I=(x.querySelector(".popup__close-button"),document.querySelector(".popup_theme_add-photo")),B=(I.querySelector(".popup__close-button"),document.querySelector(".popup"),document.querySelector(".popup__container"),x.querySelector(".popup__open-image"),document.querySelector(".popup__open-image-caption"),document.querySelector("#elements__template").content,document.querySelector(".elements__container"),document.querySelector(".popup__input-container"),document.querySelectorAll(".elements__pic"),{formSelector:".popup",inputSelectorSet:".popup__set",inputSelector:".popup__item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__item-error",errorClass:"popup__item-error_active",errorInputSelector:"popup__item_theme_red",imageModalWindow:".popup_theme_open-photo",editModalWindow:".popup_theme_edit",addPhotoModalWindow:".popup_theme_add-photo",elementsContainer:".elements__container"}),M=new q(B,C),R=new q(B,I);function A(e){document.addEventListener("keydown",V),e.addEventListener("click",D),e.classList.add("popup_open")}function T(e){e.classList.remove("popup_open"),document.removeEventListener("keydown",V),e.removeEventListener("click",D)}var D=function(e){e.target.classList.contains("popup_open")&&T(e.target)},V=function(e){"Escape"===e.key&&T(document.querySelector(".popup_open"))},H=document.querySelector(".profile__button"),W=document.querySelector(".profile__rectangle"),G=document.querySelector(".popup_theme_add-photo"),N="#elements__template";R.enableValidation(),M.enableValidation();var U=new S({nameSelector:".profile__full-name",carrerSelector:".profile__career"});H.addEventListener("click",(function(){var e=U.getUserInfo();L.value=e.name,O.value=e.carrer,M.resetValidation(),A(C)})),W.addEventListener("click",(function(){j.value="",P.value="",R.resetValidation(),A(G)}));var Y=new s(B.imageModalWindow),F=new v(B.editModalWindow,(function(){U.setUserInfo({fullName:L.value,carrer:O.value}),T(C)})),K=new v(B.addPhotoModalWindow,(function(){var e=new t({name:j.value,link:P.value},N,(function(){return Y.openPopup({name:j.value,link:P.value})})).generateCard();$.addItem(e),T(G)})),$=new g({data:[{name:"Tunnel view, California",link:"https://images.unsplash.com/photo-1604947338354-426e7a15586d?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=667&q=80.jpg"},{name:"Kauai beach drive, lihue",link:"https://images.unsplash.com/photo-1496155110490-cdcc48eba923?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1191&q=80.jpg"},{name:"Midtown and Downtown Manhattan",link:"https://images.unsplash.com/photo-1545328805-926d6a0950ca?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=334&q=80.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"},{name:"New York",link:"https://images.unsplash.com/photo-1466500419182-8602dc906b51?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80.jpg"}],renderer:function(e){var n=new t(e,N,(function(){return Y.openPopup(e)})).generateCard();$.addItem(n)}},B.elementsContainer);$.renderItems(),Y.setEventListeners(),F.setEventListeners(),K.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL3V0aWxpdGllcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvaW5pdGlhbC1jYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmRcIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gIHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGljXCIpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9pbWFnZX0pYDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vIE9wZW4gcG9wdXAgaW1hZ2UuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19waWNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpKTtcclxuXHJcbiAgICAgICAgLy8gTGlrZSBidXR0b24uXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBjYXJkIGZyb20gdGhlIGdhbGxlcnkuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGUtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNhcmQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTGlrZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2UtYnV0dG9uXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9vcGVuUG9wdXBDbGFzcyA9ICdwb3B1cF9vcGVuJztcclxuICAgIH1cclxuXHJcblxyXG4gICAgX2Nsb3NlT3ZlcmxheUJ5RXNjID0gKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlblBvcHVwKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlT3ZlcmxheUJ5RXNjKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wZW5Qb3B1cENsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZVBvcHVwKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3BlblBvcHVwQ2xhc3MpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlT3ZlcmxheUJ5RXNjKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX29wZW5Qb3B1cENsYXNzKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcGljRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX29wZW4taW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbnBpY0VsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuLWltYWdlLWNhcHRpb25cIik7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgb3BlblBvcHVwKHsgbGluaywgbmFtZSB9KSB7XHJcbiAgICAgICAgdGhpcy5fcGljRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX3BpY0VsZW1lbnQuYWx0ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9jYXB0aW9ucGljRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlblBvcHVwKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWNvbnRhaW5lclwiKTtcbiAgICB9XG5cbiAgICBjbG9zZVBvcHVwKCkge1xuICAgICAgICBzdXBlci5jbG9zZVBvcHVwKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgdGV4dFBvcHVwSW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJyldO1xuICAgICAgICBjb25zdCBpbnB1dFBvcHVwVmFsdWVzID0ge307XG5cbiAgICAgICAgdGV4dFBvcHVwSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dFBvcHVwVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIGlucHV0UG9wdXBWYWx1ZXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7ZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBjYXJyZXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gbmFtZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2NhcnJlclNlbGVjdG9yID0gY2FycmVyU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9jYXJyZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcnJlclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbyA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBjYXJyZXI6IHRoaXMuX2NhcnJlci50ZXh0Q29udGVudCB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHsgZnVsbE5hbWUsIGNhcnJlciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGZ1bGxOYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcnJlci50ZXh0Q29udGVudCA9IGNhcnJlcjtcclxuICAgIH1cclxufSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCB7IGVycm9yQ2xhc3MsIGVycm9ySW5wdXRTZWxlY3RvciB9ID0gdGhpcy5fY29uZmlnO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JJbnB1dFNlbGVjdG9yKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MsIGVycm9ySW5wdXRTZWxlY3RvciB9ID0gdGhpcy5fY29uZmlnO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvcklucHV0U2VsZWN0b3IpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzLCBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fY29uZmlnO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIHJlc2V0VmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBpbnB1dEFycmF5ID0gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgZnVsbE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZnVsbC1uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJlZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fY2FyZWVyJyk7XHJcbmV4cG9ydCBjb25zdCBvcGVuRWRpdFByb2ZpbGVQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IG9wZW5BZGRDYXJkUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcmVjdGFuZ2xlJyk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRDYXJlZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9jYXJlZXInKTtcclxuZXhwb3J0IGNvbnN0IG5ld1Bob3RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9waG90by10aXRsZScpO1xyXG5leHBvcnQgY29uc3QgbmV3UGhvdG9VcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV91cmwnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlRWRpdEZvcm0gPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfb3Blbi1waG90b1wiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlUG9wdXBJbWFnZSA9IHBvcHVwUGhvdG8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBob3RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfYWRkLXBob3RvXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VBZGRQaG90b0Zvcm0gPSBhZGRQaG90b0Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcG9wdXBQaG90by5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBPcGVuSW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3Blbi1pbWFnZS1jYXB0aW9uXCIpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50c19fdGVtcGxhdGVcIikuY29udGVudDtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWNvbnRhaW5lclwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWxlbWVudHNfX3BpY1wiKTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBDb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yU2V0OiBcIi5wb3B1cF9fc2V0XCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faXRlbVwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW0tZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW0tZXJyb3JfYWN0aXZlXCIsXHJcbiAgICBlcnJvcklucHV0U2VsZWN0b3I6IFwicG9wdXBfX2l0ZW1fdGhlbWVfcmVkXCIsXHJcbiAgICBpbWFnZU1vZGFsV2luZG93OiAnLnBvcHVwX3RoZW1lX29wZW4tcGhvdG8nLFxyXG4gICAgZWRpdE1vZGFsV2luZG93OicucG9wdXBfdGhlbWVfZWRpdCcsXHJcbiAgICBhZGRQaG90b01vZGFsV2luZG93OicucG9wdXBfdGhlbWVfYWRkLXBob3RvJyxcclxuICAgIGVsZW1lbnRzQ29udGFpbmVyOiBcIi5lbGVtZW50c19fY29udGFpbmVyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUNvbmZpZyA9IHtcclxuICAgIHByb2ZpbGVUaXRsZTogJy5wcm9maWxlX19mdWxsLW5hbWUnLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2NhcmVlcicsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBvcHVwQ29uZmlnLCBlZGl0Rm9ybSk7XHJcbmV4cG9ydCBjb25zdCBhZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cENvbmZpZywgYWRkUGhvdG9Gb3JtKTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU92ZXJsYXlCeUVzYyk7XHJcbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUmVtb3RlQ2xpY2spO1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbicpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcclxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW4nKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlT3ZlcmxheUJ5RXNjKTtcclxuICAgIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVSZW1vdGVDbGljayk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlUmVtb3RlQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIikpIHtcclxuICAgICAgICBjbG9zZVBvcHVwKGUudGFyZ2V0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNsb3NlT3ZlcmxheUJ5RXNjID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIGNsb3NlUG9wdXAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW4nKSlcclxuICAgIH1cclxufSIsImltcG9ydCBcIi4vaW5kZXguY3NzXCJcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2luaXRpYWwtY2FyZHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IGNsb3NlUG9wdXAsIG9wZW5Qb3B1cCwgZWRpdEZvcm0sIGVkaXRWYWxpZGF0b3IsIG5ld1Bob3RvVGl0bGUsIG5ld1Bob3RvVXJsLCBhZGRWYWxpZGF0b3IsIGlucHV0TmFtZSwgaW5wdXRDYXJlZXIsIHBvcHVwQ29uZmlnLCBwcm9maWxlQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvdXRpbGl0aWVzLmpzJztcclxuXHJcbmNvbnN0IG9wZW5FZGl0UHJvZmlsZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5jb25zdCBvcGVuQWRkQ2FyZFBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3JlY3RhbmdsZScpO1xyXG5jb25zdCBhZGRQaG90b0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3RoZW1lX2FkZC1waG90b1wiKTtcclxuY29uc3QgZWxlbWVudFRlbXBsYXRlID0gXCIjZWxlbWVudHNfX3RlbXBsYXRlXCI7XHJcblxyXG5hZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZVNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVUaXRsZSwgY2FycmVyU2VsZWN0b3I6IHByb2ZpbGVDb25maWcucHJvZmlsZURlc2NyaXB0aW9uIH0pO1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBpbnB1dENhcmVlci52YWx1ZSA9IHVzZXJEYXRhLmNhcnJlcjtcclxuXHJcbiAgZWRpdFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuXHJcbiAgb3BlblBvcHVwKGVkaXRGb3JtKTtcclxufVxyXG5cclxub3BlbkVkaXRQcm9maWxlUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cEVkaXQpO1xyXG5cclxub3BlbkFkZENhcmRQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkUGhvdG9DbGljayk7XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkUGhvdG9DbGljaygpIHtcclxuICBuZXdQaG90b1RpdGxlLnZhbHVlID0gXCJcIjtcclxuICBuZXdQaG90b1VybC52YWx1ZSA9IFwiXCI7XHJcbiAgYWRkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIG9wZW5Qb3B1cChhZGRQaG90b0Zvcm0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRQcm9maWxlRm9ybSgpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IGZ1bGxOYW1lOiBpbnB1dE5hbWUudmFsdWUsIGNhcnJlcjogaW5wdXRDYXJlZXIudmFsdWUgfSk7XHJcbiAgY2xvc2VQb3B1cChlZGl0Rm9ybSk7XHJcbn1cclxuXHJcblxyXG5jb25zdCBpbWFnZVBvcHVwTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDb25maWcuaW1hZ2VNb2RhbFdpbmRvdyk7XHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENvbmZpZy5lZGl0TW9kYWxXaW5kb3csIHN1Ym1pdFByb2ZpbGVGb3JtKTtcclxuY29uc3QgYWRkUGhvdG9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLmFkZFBob3RvTW9kYWxXaW5kb3csIGNyZWF0ZU5ld0NhcmQpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZCgpIHtcclxuICBjb25zdCBjYXJkSW5zdGFuY2UgPSBuZXcgQ2FyZCh7IG5hbWU6IG5ld1Bob3RvVGl0bGUudmFsdWUsIGxpbms6IG5ld1Bob3RvVXJsLnZhbHVlIH0sIGVsZW1lbnRUZW1wbGF0ZSxcclxuICAgICgpID0+IGltYWdlUG9wdXBNb2RhbC5vcGVuUG9wdXAoeyBuYW1lOiBuZXdQaG90b1RpdGxlLnZhbHVlLCBsaW5rOiBuZXdQaG90b1VybC52YWx1ZSB9KSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkSW5zdGFuY2UuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgY2xvc2VQb3B1cChhZGRQaG90b0Zvcm0pO1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBkYXRhOiBpbml0aWFsQ2FyZHMsXHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkSW5zdGFuY2UgPSBuZXcgQ2FyZChpdGVtLCBlbGVtZW50VGVtcGxhdGUsXHJcbiAgICAgICgpID0+IGltYWdlUG9wdXBNb2RhbC5vcGVuUG9wdXAoaXRlbSkpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkSW5zdGFuY2UuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICB9XHJcbn0sIHBvcHVwQ29uZmlnLmVsZW1lbnRzQ29udGFpbmVyKTtcclxuXHJcblxyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuXHJcbmltYWdlUG9wdXBNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZFBob3RvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVHVubmVsIHZpZXcsIENhbGlmb3JuaWFcIixcclxuICAgICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwNDk0NzMzODM1NC00MjZlN2ExNTU4NmQ/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY2NyZxPTgwLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkthdWFpIGJlYWNoIGRyaXZlLCBsaWh1ZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDk2MTU1MTEwNDkwLWNkY2M0OGViYTkyMz9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTE5MSZxPTgwLmpwZ1wiXHJcbiAgICB9LFxyXG4gIFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIk1pZHRvd24gYW5kIERvd250b3duIE1hbmhhdHRhblwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ1MzI4ODA1LTkyNmQ2YTA5NTBjYT9peGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MzM0JnE9ODAuanBnXCJcclxuICAgIH0sXHJcbiAgXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxyXG4gICAgfSxcclxuICAgXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIk5ldyBZb3JrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NjY1MDA0MTkxODItODYwMmRjOTA2YjUxP2l4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmaXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMDUwJnE9ODAuanBnXCJcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcblxyXG4gICAgXHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwidGhpcyIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2UiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlIiwiX3JlbW92ZUNhcmQiLCJyZW1vdmUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJlIiwia2V5IiwiY2xvc2VQb3B1cCIsIl9wb3B1cCIsIl9vcGVuUG9wdXBDbGFzcyIsIl9jbG9zZU92ZXJsYXlCeUVzYyIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BpY0VsZW1lbnQiLCJfY2FwdGlvbnBpY0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsIl9zdWJtaXRGb3JtIiwiX2Zvcm0iLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwidGV4dFBvcHVwSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0UG9wdXBWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiZWxlbWVudCIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJpbm5lckhUTUwiLCJjbGVhciIsIml0ZW0iLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImNhcnJlclNlbGVjdG9yIiwiX25hbWUiLCJjYXJyZXIiLCJfY2FycmVyIiwiX25hbWVTZWxlY3RvciIsIl9jYXJyZXJTZWxlY3RvciIsImZ1bGxOYW1lIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiX2NvbmZpZyIsImVycm9yQ2xhc3MiLCJlcnJvcklucHV0U2VsZWN0b3IiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pbnB1dExpc3QiLCJzb21lIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJpbnB1dFNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0TmFtZSIsImlucHV0Q2FyZWVyIiwibmV3UGhvdG9UaXRsZSIsIm5ld1Bob3RvVXJsIiwiZWRpdEZvcm0iLCJwb3B1cFBob3RvIiwiYWRkUGhvdG9Gb3JtIiwicG9wdXBDb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yU2V0IiwiaW1hZ2VNb2RhbFdpbmRvdyIsImVkaXRNb2RhbFdpbmRvdyIsImFkZFBob3RvTW9kYWxXaW5kb3ciLCJlbGVtZW50c0NvbnRhaW5lciIsImVkaXRWYWxpZGF0b3IiLCJhZGRWYWxpZGF0b3IiLCJvcGVuUG9wdXAiLCJwb3B1cCIsImNsb3NlT3ZlcmxheUJ5RXNjIiwiaGFuZGxlUmVtb3RlQ2xpY2siLCJvcGVuRWRpdFByb2ZpbGVQb3B1cEJ0biIsIm9wZW5BZGRDYXJkUG9wdXBCdG4iLCJlbGVtZW50VGVtcGxhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwidXNlckluZm8iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwiaW1hZ2VQb3B1cE1vZGFsIiwiZWRpdFByb2ZpbGVQb3B1cCIsInNldFVzZXJJbmZvIiwiYWRkUGhvdG9Qb3B1cCIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=