!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r,o,i,a,u){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"counterLikes",(function(e){c._likes=e,c._updateLikesCount(),c.isLikedByUser()?c._likeBtn.classList.add("elements__like-button_active"):c._likeBtn.classList.remove("elements__like-button_active")})),t(this,"_updateLikesCount",(function(){c._element.querySelector(".element__like-counter").textContent=c._likes.length})),t(this,"_toggleLike",(function(){c._element.querySelector(".elements__like-button").classList.toggle("elements__like-button_active")})),this._title=e.name,this._image=e.link,this._template=r,this._handleCardClick=o,this._handleDelete=i,this._userId=u,this._handleLike=a,this._id=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._userId=u,this._cardTemplate=document.querySelector(this._template).content.querySelector(".elements__card")}var r,o;return r=n,(o=[{key:"generateCard",value:function(){return this._element=this._cardTemplate.cloneNode(!0),this._setEventListeners(),this._element.querySelector(".elements__pic").style.backgroundImage="url(".concat(this._image,")"),this._element.querySelector(".elements__title").textContent=this._title,this.counterLikes(this._likes),this._ownerId!==this._userId&&(this._deleteBtn.style.display="none"),this._element}},{key:"isLikedByUser",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__pic").addEventListener("click",(function(){return e._handleCardClick()})),this._likeBtn=this._element.querySelector(".elements__like-button"),this._likeBtn.addEventListener("click",(function(){return e._handleLike(e._id)})),this._deleteBtn=this._element.querySelector(".elements__delete-button"),this._deleteBtn.addEventListener("click",(function(){return e._handleDelete(e._id)}))}},{key:"_removeCard",value:function(){this._element.remove()}}])&&e(r.prototype,o),n}(),r=n;function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.closePopup()},(n="_closeOverlayByEsc")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._openPopupClass="popup_open"}var t,n;return t=e,(n=[{key:"openPopup",value:function(){document.addEventListener("keydown",this._closeOverlayByEsc),this._popup.classList.add(this._openPopupClass)}},{key:"closePopup",value:function(){this._popup.classList.remove(this._openPopupClass),document.removeEventListener("keydown",this._closeOverlayByEsc)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains(e._openPopupClass)||t.target.classList.contains("popup__close-button"))&&e.closePopup()}))}}])&&o(t.prototype,n),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},c(e,t,n||e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._picElement=t._popup.querySelector(".popup__open-image"),t._captionpicElement=t._popup.querySelector(".popup__open-image-caption"),t}return t=a,(n=[{key:"openPopup",value:function(e){var t=e.link,n=e.name;this._picElement.src=t,this._picElement.alt=n,this._captionpicElement.textContent=n,c(f(a.prototype),"openPopup",this).call(this)}}])&&u(t.prototype,n),a}(i);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},y(e,t,n||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),S(b(n=i.call(this,e)),"showLoadingProgress",(function(){n._submitBtn.textContent="Saving..."})),S(b(n),"onLoadFinish",(function(){n._submitBtn.textContent=n._submitBtnContent})),n._submitForm=t,n._form=n._popup.querySelector(".popup__input-container"),n._submitBtn=n._form.querySelector(".popup__submit-button"),n._submitBtnContent=n._submitBtn.textContent,n}return t=a,(n=[{key:"closePopup",value:function(){y(g(a.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;y(g(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues())}))}},{key:"_getInputValues",value:function(){var e,t=function(e){if(Array.isArray(e))return d(e)}(e=this._form.querySelectorAll(".popup__item"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n={};return t.forEach((function(e){n[e.name]=e.value})),n}}])&&h(t.prototype,n),a}(i);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(t,n){var r=this,o=t.data,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"addItem",(function(e){r._container.prepend(e)})),k(this,"renderItems",(function(e){e.forEach((function(e){r._renderer(e)}))})),this._renderedItems=o,this._renderer=i,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}}])&&E(t.prototype,n),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n,r,o=this,i=t.nameSelector,a=t.carrerSelector,u=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){return{name:o._name.textContent,carrer:o._carrer.textContent,avatar:o._avatar.src}},(n="getUserInfo")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._nameSelector=i,this._carrerSelector=a,this._avatarSelector=u,this._name=document.querySelector(this._nameSelector),this._carrer=document.querySelector(this._carrerSelector),this._avatar=document.querySelector(this._avatarSelector)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.fullName,n=e.carrer;this._name.textContent=t,this._carrer.textContent=n}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&O(t.prototype,n),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,"_showInputError",(function(e,t){var n=r._config,o=n.errorClass,i=n.errorInputSelector,a=r._formElement.querySelector(".".concat(e.id,"-error"));a.textContent=t,a.classList.add(o),e.classList.add(i)})),q(this,"_hideInputError",(function(e){var t=r._config,n=(t.inputErrorClass,t.errorClass),o=t.errorInputSelector,i=r._formElement.querySelector(".".concat(e.id,"-error"));i.classList.remove(n),e.classList.remove(o),i.textContent=""})),q(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),q(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),q(this,"_toggleButtonState",(function(){var e=r._config,t=e.inactiveButtonClass,n=e.submitButtonSelector;r._buttonElement=r._formElement.querySelector(n),r._hasInvalidInput()?(r._buttonElement.disabled=!0,r._buttonElement.classList.add(t)):(r._buttonElement.classList.remove(t),r._buttonElement.disabled=!1)})),q(this,"_setEventListeners",(function(){var e=r._config.inputSelector;r._inputList=Array.from(r._formElement.querySelectorAll(e)),r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),q(this,"resetValidation",(function(){Array.from(r._inputList),r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._config=t,this._formElement=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&C(t.prototype,n),e}(),I=(document.querySelector(".profile__full-name"),document.querySelector(".profile__career"),document.querySelector(".profile__button"),document.querySelector(".profile__rectangle"),document.querySelector(".popup__item_type_name")),R=document.querySelector(".popup__item_type_career"),B=document.querySelector(".popup__item_type_photo-title"),U=document.querySelector(".popup__item_type_url"),A=document.querySelector(".popup__item_type_avatar"),T=document.querySelector(".popup_theme_edit"),D=document.querySelector(".popup_theme_edit-avatar"),x=(T.querySelector(".popup__close-button"),document.querySelector(".popup_theme_open-photo")),M=(x.querySelector(".popup__close-button"),document.querySelector(".popup_theme_add-photo")),V=(M.querySelector(".popup__close-button"),document.querySelector(".popup"),document.querySelector(".popup__container"),x.querySelector(".popup__open-image"),document.querySelector(".popup__open-image-caption"),document.querySelector("#elements__template").content,document.querySelector(".elements__container"),document.querySelector(".popup__input-container"),document.querySelectorAll(".elements__pic"),document.querySelector(".elements__delete-button"),{formSelector:".popup",inputSelectorSet:".popup__set",inputSelector:".popup__item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__item-error",errorClass:"popup__item-error_active",errorInputSelector:"popup__item_theme_red",imageModalWindow:".popup_theme_open-photo",editModalWindow:".popup_theme_edit",addPhotoModalWindow:".popup_theme_add-photo",editAvatarModalWindow:".popup_theme_edit-avatar",deleteCardModalWindow:".popup_theme_delete-photo",elementsContainer:".elements__container"}),W=new j(V,T),N=new j(V,M),F=new j(V,D);function H(e){document.addEventListener("keydown",z),e.addEventListener("click",$),e.classList.add("popup_open")}function J(e){e.classList.remove("popup_open"),document.removeEventListener("keydown",z),e.removeEventListener("click",$)}var $=function(e){e.target.classList.contains("popup_open")&&J(e.target)},z=function(e){"Escape"===e.key&&J(document.querySelector(".popup_open"))};function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(){function e(t){var n=this,r=t.baseURL,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,"getInitialCards",(function(){return fetch("".concat(n._baseURL,"/cards"),{headers:n._headers}).then((function(e){return n._getResponseData(e)}))})),K(this,"getUserInfo",(function(){return fetch("".concat(n._baseURL,"/users/me"),{headers:n._headers}).then((function(e){return n._getResponseData(e)}))})),K(this,"createNewCard",(function(e){return fetch("".concat(n._baseURL,"/cards"),{headers:n._headers,method:"POST",body:JSON.stringify(e)}).then((function(e){return n._getResponseData(e)}))})),K(this,"deleteCard",(function(e){return fetch("".concat(n._baseURL,"/cards/").concat(e),{headers:n._headers,method:"DELETE"}).then((function(e){return n._getResponseData(e)}))})),K(this,"setUserInfo",(function(e){var t=e.name,r=e.about;return fetch("".concat(n._baseURL,"/users/me"),{headers:n._headers,method:"PATCH",body:JSON.stringify({name:t,about:r})}).then((function(e){return n._getResponseData(e)}))})),K(this,"setUserImage",(function(e){return fetch("".concat(n._baseURL,"/users/me/avatar"),{headers:n._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return n._getResponseData(e)}))})),K(this,"likeCard",(function(e){return fetch("".concat(n._baseURL,"/cards/likes/").concat(e),{headers:n._headers,method:"PUT"}).then((function(e){return n._getResponseData(e)}))})),K(this,"unlikeCard",(function(e){return fetch("".concat(n._baseURL,"/cards/likes/").concat(e),{headers:n._headers,method:"DELETE"}).then((function(e){return n._getResponseData(e)}))})),this._baseURL=r,this._headers=o}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}}])&&G(t.prototype,n),e}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t,n){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},ee(e,t,n||e)}function te(e,t){return te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(r);if(o){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ne(this,e)});function a(){var e;Y(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(re(e=i.call.apply(i,[this].concat(n))),"setAction",(function(t){e._submitHandler=t})),e}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;ee(oe(a.prototype),"setEventListeners",this).call(this),this._popup.querySelector(".popup__input-container").addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()}))}}])&&Z(t.prototype,n),a}(i);function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce,le=new Q({baseURL:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"001651b9-e63d-4f3d-8d65-ab968b3111ee","Content-Type":"application/json"}});Promise.all([le.getInitialCards(),le.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ye.setUserInfo({fullName:i.name,carrer:i.about}),ye.setUserAvatar(i.avatar),ce=i._id,Ee.renderItems(o)})).catch((function(e){console.log(e)}));var se=document.querySelector(".profile__button"),fe=document.querySelector(".profile__rectangle"),pe=document.querySelector(".avatar__edit"),_e=document.querySelector(".popup_theme_add-photo"),de=document.querySelector(".popup_theme_edit-avatar"),he="#elements__template";N.enableValidation(),W.enableValidation(),F.enableValidation();var ye=new P({nameSelector:".profile__full-name",carrerSelector:".profile__career",avatarSelector:".avatar__image"});se.addEventListener("click",(function(){var e=ye.getUserInfo();I.value=e.name,R.value=e.carrer,W.resetValidation(),H(T)})),fe.addEventListener("click",(function(){B.value="",U.value="",N.resetValidation(),H(_e)})),pe.addEventListener("click",(function(){var e=ye.getUserInfo();A.value=e.avatar,F.resetValidation(),H(D)}));var me=new p(V.imageModalWindow),ve=new ae(V.deleteCardModalWindow),be=new w(V.editModalWindow,(function(){be.showLoadingProgress(),le.setUserInfo({name:I.value,about:R.value}).then((function(e){ye.setUserInfo({fullName:e.name,carrer:e.about}),J(T)})).catch((function(e){console.log(e)})).finally((function(){return be.onLoadFinish()}))})),ge=new w(V.addPhotoModalWindow,(function(){ge.showLoadingProgress(),le.createNewCard({name:B.value,link:U.value}).then((function(e){var t=we(e,he);Ee.addItem(t),J(_e)})).catch((function(e){console.log(e)})).finally((function(){return ge.onLoadFinish()}))})),Se=new w(V.editAvatarModalWindow,(function(){Se.showLoadingProgress(),le.setUserImage(A.value).then((function(e){ye.setUserAvatar(e.avatar),J(de)})).catch((function(e){console.log(e)})).finally((function(){return Se.onLoadFinish()}))}));function we(e,t){var n=new r(e,t,(function(){return me.openPopup(e)}),(function(e){ve.openPopup(),ve.setAction((function(){le.deleteCard(e).then((function(){n._removeCard(),ve.closePopup()})).catch((function(e){console.log(e)}))}))}),(function(e){n.isLikedByUser()?le.unlikeCard(e).then((function(e){return n.counterLikes(e.likes)})).catch((function(e){console.log(e)})):le.likeCard(e).then((function(e){return n.counterLikes(e.likes)})).catch((function(e){console.log(e)}))}),ce);return n.generateCard()}var Ee=new L({renderer:function(e){var t=we(e,he);Ee.addItem(t)}},V.elementsContainer);me.setEventListeners(),be.setEventListeners(),ge.setEventListeners(),Se.setEventListeners(),ve.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBSXdDLFNBQVMxRyxHQUNWaUQsTUFBSyxTQUFDQyxHQUFELE9BQVNtRCxFQUFhN0ssYUFBYTBILEVBQUlwSSxVQUM1Q2dLLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsUUFVakIxTCxJQUVILE9BQU9nTixFQUFhTSxlQUV4QixJQUFNL0IsR0FBVyxJQUFJOUcsRUFBUSxDQUMzQkUsU0FBVSxTQUFDSyxHQUNULElBQU11SSxFQUFPWixHQUFjM0gsRUFBTWlILElBRWpDVixHQUFTc0IsUUFBUVUsS0FFbEJqRixFQUFZUSxtQkFHZnNELEdBQWdCb0Isb0JBQ2hCbEIsR0FBaUJrQixvQkFDakJkLEdBQWNjLG9CQUNkVixHQUFxQlUsb0JBQ3JCbkIsR0FBZ0JtQixvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwRm9yRGVsZXRlQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlLCBoYW5kbGVMaWtlLCB1c2VySWQpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGljXCIpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9pbWFnZX0pYDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyTGlrZXModGhpcy5fbGlrZXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBjb3VudGVyTGlrZXMgPSAodXBkYXRlZExpa2VzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSB1cGRhdGVkTGlrZXM7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0xpa2VkQnlVc2VyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0xpa2VkQnlVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKHVzZXIgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZClcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gT3BlbiBwb3B1cCBpbWFnZS5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3BpY1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xyXG5cclxuICAgICAgICAvLyBMaWtlIGJ1dHRvbi5cclxuICAgICAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZSh0aGlzLl9pZCkpO1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgY2FyZCBmcm9tIHRoZSBnYWxsZXJ5LlxyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLl9pZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVMaWtlc0NvdW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTGlrZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2UtYnV0dG9uXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX29wZW5Qb3B1cENsYXNzID0gJ3BvcHVwX29wZW4nO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfY2xvc2VPdmVybGF5QnlFc2MgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuUG9wdXAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VPdmVybGF5QnlFc2MpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlblBvcHVwQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlUG9wdXAoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuUG9wdXBDbGFzcyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VPdmVybGF5QnlFc2MpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fb3BlblBvcHVwQ2xhc3MpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9waWNFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3Blbi1pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9jYXB0aW9ucGljRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX29wZW4taW1hZ2UtY2FwdGlvblwiKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBvcGVuUG9wdXAoeyBsaW5rLCBuYW1lIH0pIHtcclxuICAgICAgICB0aGlzLl9waWNFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fcGljRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb25waWNFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXQtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG5Db250ZW50ID0gdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlUG9wdXAoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZ1Byb2dyZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9XHJcblxyXG4gICAgb25Mb2FkRmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0bkNvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IHRleHRQb3B1cElucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpXTtcclxuICAgICAgICBjb25zdCBpbnB1dFBvcHVwVmFsdWVzID0ge307XHJcblxyXG4gICAgICAgIHRleHRQb3B1cElucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dFBvcHVwVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGlucHV0UG9wdXBWYWx1ZXM7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtID0gKGVsZW1lbnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyA9IChpdGVtcykgPT4ge1xyXG5cclxuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGNhcnJlclNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gbmFtZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2NhcnJlclNlbGVjdG9yID0gY2FycmVyU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSBhdmF0YXJTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2NhcnJlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FycmVyU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGNhcnJlcjogdGhpcy5fY2FycmVyLnRleHRDb250ZW50LCBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IGZ1bGxOYW1lLCBjYXJyZXIgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBmdWxsTmFtZTtcclxuICAgICAgICB0aGlzLl9jYXJyZXIudGV4dENvbnRlbnQgPSBjYXJyZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG59IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3JDbGFzcywgZXJyb3JJbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9jb25maWc7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvcklucHV0U2VsZWN0b3IpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcywgZXJyb3JJbnB1dFNlbGVjdG9yIH0gPSB0aGlzLl9jb25maWc7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9ySW5wdXRTZWxlY3Rvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yIH0gPSB0aGlzLl9jb25maWc7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3RvciB9ID0gdGhpcy5fY29uZmlnO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuX2lucHV0TGlzdCk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuXHJcbmV4cG9ydCBjb25zdCBmdWxsTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19mdWxsLW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmVlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19jYXJlZXInKTtcclxuZXhwb3J0IGNvbnN0IG9wZW5FZGl0UHJvZmlsZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5leHBvcnQgY29uc3Qgb3BlbkFkZENhcmRQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19yZWN0YW5nbGUnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBpbnB1dENhcmVlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX2NhcmVlcicpO1xyXG5leHBvcnQgY29uc3QgbmV3UGhvdG9UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX3Bob3RvLXRpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBuZXdQaG90b1VybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX3VybCcpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9hdmF0YXInKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90aGVtZV9lZGl0LWF2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlRWRpdEZvcm0gPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfb3Blbi1waG90b1wiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlUG9wdXBJbWFnZSA9IHBvcHVwUGhvdG8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBob3RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfYWRkLXBob3RvXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VBZGRQaG90b0Zvcm0gPSBhZGRQaG90b0Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcG9wdXBQaG90by5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19vcGVuLWltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBPcGVuSW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3Blbi1pbWFnZS1jYXB0aW9uXCIpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50c19fdGVtcGxhdGVcIikuY29udGVudDtcclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWNvbnRhaW5lclwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWxlbWVudHNfX3BpY1wiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBcIixcclxuICAgIGlucHV0U2VsZWN0b3JTZXQ6IFwiLnBvcHVwX19zZXRcIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pdGVtXCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faXRlbS1lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9faXRlbS1lcnJvcl9hY3RpdmVcIixcclxuICAgIGVycm9ySW5wdXRTZWxlY3RvcjogXCJwb3B1cF9faXRlbV90aGVtZV9yZWRcIixcclxuICAgIGltYWdlTW9kYWxXaW5kb3c6ICcucG9wdXBfdGhlbWVfb3Blbi1waG90bycsXHJcbiAgICBlZGl0TW9kYWxXaW5kb3c6Jy5wb3B1cF90aGVtZV9lZGl0JyxcclxuICAgIGFkZFBob3RvTW9kYWxXaW5kb3c6Jy5wb3B1cF90aGVtZV9hZGQtcGhvdG8nLFxyXG4gICAgZWRpdEF2YXRhck1vZGFsV2luZG93OicucG9wdXBfdGhlbWVfZWRpdC1hdmF0YXInLFxyXG4gICAgZGVsZXRlQ2FyZE1vZGFsV2luZG93OicucG9wdXBfdGhlbWVfZGVsZXRlLXBob3RvJyxcclxuICAgIGVsZW1lbnRzQ29udGFpbmVyOiBcIi5lbGVtZW50c19fY29udGFpbmVyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUNvbmZpZyA9IHtcclxuICAgIHByb2ZpbGVUaXRsZTogJy5wcm9maWxlX19mdWxsLW5hbWUnLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2NhcmVlcicsXHJcbiAgICBhdmF0YXJJbWFnZTonLmF2YXRhcl9faW1hZ2UnLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cENvbmZpZywgZWRpdEZvcm0pO1xyXG5leHBvcnQgY29uc3QgYWRkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocG9wdXBDb25maWcsIGFkZFBob3RvRm9ybSk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwb3B1cENvbmZpZywgZWRpdEF2YXRhckZvcm0pO1xyXG5cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU92ZXJsYXlCeUVzYyk7XHJcbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUmVtb3RlQ2xpY2spO1xyXG4gICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbicpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcclxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW4nKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlT3ZlcmxheUJ5RXNjKTtcclxuICAgIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVSZW1vdGVDbGljayk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlUmVtb3RlQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIikpIHtcclxuICAgICAgICBjbG9zZVBvcHVwKGUudGFyZ2V0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNsb3NlT3ZlcmxheUJ5RXNjID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgIGNsb3NlUG9wdXAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW4nKSlcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGJhc2VVUkwsIGhlYWRlcnMgfSkge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG4gICAgY3JlYXRlTmV3Q2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvID0gKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbWFnZSA9IChhdmF0YXIpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGxpa2VDYXJkID0gKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgdW5saWtlQ2FyZCA9IChjYXJkSWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRm9yRGVsZXRlQ2FyZCBleHRlbmRzIFBvcHVwIHtcclxuICAgIHNldEFjdGlvbiA9IChmdW5jKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGZ1bmM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dC1jb250YWluZXJcIikuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIlxyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgZGVsZXRlQ2FyZEJ0biwgY2xvc2VQb3B1cCwgb3BlblBvcHVwLCBlZGl0Rm9ybSwgZWRpdEF2YXRhckZvcm0sIGVkaXRWYWxpZGF0b3IsIGF2YXRhclZhbGlkYXRvciwgbmV3UGhvdG9UaXRsZSwgbmV3UGhvdG9VcmwsIGlucHV0QXZhdGFyLCBhZGRWYWxpZGF0b3IsIGlucHV0TmFtZSwgaW5wdXRDYXJlZXIsIHBvcHVwQ29uZmlnLCBwcm9maWxlQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvdXRpbGl0aWVzLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBQb3B1cEZvckRlbGV0ZUNhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBGb3JEZWxldGVDYXJkXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVVJMOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjAwMTY1MWI5LWU2M2QtNGYzZC04ZDY1LWFiOTY4YjMxMTFlZVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9XHJcbn0pO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgZnVsbE5hbWU6IHVzZXJEYXRhLm5hbWUsIGNhcnJlcjogdXNlckRhdGEuYWJvdXQgfSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gIH0pO1xyXG5cclxuY29uc3Qgb3BlbkVkaXRQcm9maWxlUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XHJcbmNvbnN0IG9wZW5BZGRDYXJkUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcmVjdGFuZ2xlJyk7XHJcbmNvbnN0IG9wZW5FZGl0QXZhdGFyUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXZhdGFyX19lZGl0Jyk7XHJcbmNvbnN0IGFkZFBob3RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdGhlbWVfYWRkLXBob3RvXCIpO1xyXG5jb25zdCBlZGl0UG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3RoZW1lX2VkaXQtYXZhdGFyXCIpO1xyXG5jb25zdCBlbGVtZW50VGVtcGxhdGUgPSBcIiNlbGVtZW50c19fdGVtcGxhdGVcIjtcclxuXHJcbmFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBuYW1lU2VsZWN0b3I6IHByb2ZpbGVDb25maWcucHJvZmlsZVRpdGxlLCBjYXJyZXJTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlRGVzY3JpcHRpb24sIGF2YXRhclNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLmF2YXRhckltYWdlIH0pO1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBpbnB1dENhcmVlci52YWx1ZSA9IHVzZXJEYXRhLmNhcnJlcjtcclxuXHJcbiAgZWRpdFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuXHJcbiAgb3BlblBvcHVwKGVkaXRGb3JtKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdEF2YXRhcigpIHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXRBdmF0YXIudmFsdWUgPSB1c2VyRGF0YS5hdmF0YXI7XHJcblxyXG4gIGF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuXHJcbiAgb3BlblBvcHVwKGVkaXRBdmF0YXJGb3JtKTtcclxufVxyXG5cclxuXHJcbm9wZW5FZGl0UHJvZmlsZVBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUG9wdXBFZGl0KTtcclxub3BlbkFkZENhcmRQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkUGhvdG9DbGljayk7XHJcbm9wZW5FZGl0QXZhdGFyUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qb3B1cEVkaXRBdmF0YXIpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkUGhvdG9DbGljaygpIHtcclxuICBuZXdQaG90b1RpdGxlLnZhbHVlID0gXCJcIjtcclxuICBuZXdQaG90b1VybC52YWx1ZSA9IFwiXCI7XHJcbiAgYWRkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIG9wZW5Qb3B1cChhZGRQaG90b0Zvcm0pO1xyXG59XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDb25maWcuaW1hZ2VNb2RhbFdpbmRvdyk7XHJcbmNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBQb3B1cEZvckRlbGV0ZUNhcmQocG9wdXBDb25maWcuZGVsZXRlQ2FyZE1vZGFsV2luZG93KTtcclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLmVkaXRNb2RhbFdpbmRvdywgKCkgPT4ge1xyXG4gIGVkaXRQcm9maWxlUG9wdXAuc2hvd0xvYWRpbmdQcm9ncmVzcygpO1xyXG4gIGFwaS5zZXRVc2VySW5mbyh7IG5hbWU6IGlucHV0TmFtZS52YWx1ZSwgYWJvdXQ6IGlucHV0Q2FyZWVyLnZhbHVlIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IGZ1bGxOYW1lOiByZXMubmFtZSwgY2FycmVyOiByZXMuYWJvdXQgfSlcclxuXHJcbiAgICAgIGNsb3NlUG9wdXAoZWRpdEZvcm0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiBlZGl0UHJvZmlsZVBvcHVwLm9uTG9hZEZpbmlzaCgpKTtcclxufSk7XHJcblxyXG5jb25zdCBhZGRQaG90b1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBDb25maWcuYWRkUGhvdG9Nb2RhbFdpbmRvdywgKCkgPT4ge1xyXG4gIGFkZFBob3RvUG9wdXAuc2hvd0xvYWRpbmdQcm9ncmVzcygpO1xyXG4gIGFwaS5jcmVhdGVOZXdDYXJkKHsgbmFtZTogbmV3UGhvdG9UaXRsZS52YWx1ZSwgbGluazogbmV3UGhvdG9VcmwudmFsdWUgfSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVOZXdDYXJkKHJlcywgZWxlbWVudFRlbXBsYXRlKVxyXG5cclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkKTtcclxuICAgICAgY2xvc2VQb3B1cChhZGRQaG90b0Zvcm0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gYWRkUGhvdG9Qb3B1cC5vbkxvYWRGaW5pc2goKSk7XHJcbn0pO1xyXG5jb25zdCBlZGl0QXZhdGFyUGhvdG9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ29uZmlnLmVkaXRBdmF0YXJNb2RhbFdpbmRvdywgKCkgPT4ge1xyXG4gIGVkaXRBdmF0YXJQaG90b1BvcHVwLnNob3dMb2FkaW5nUHJvZ3Jlc3MoKTtcclxuICBhcGkuc2V0VXNlckltYWdlKGlucHV0QXZhdGFyLnZhbHVlKVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKVxyXG5cclxuICAgICAgY2xvc2VQb3B1cChlZGl0UG9wdXBBdmF0YXIpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gZWRpdEF2YXRhclBob3RvUG9wdXAub25Mb2FkRmluaXNoKCkpO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmQoaXRlbSwgZWxlbWVudFRlbXBsYXRlKSB7XHJcbiAgY29uc3QgY2FyZEluc3RhbmNlID0gbmV3IENhcmQoaXRlbSwgZWxlbWVudFRlbXBsYXRlLFxyXG4gICAgKCkgPT4gaW1hZ2VQb3B1cE1vZGFsLm9wZW5Qb3B1cChpdGVtKSwgIChpZCkgPT4ge1xyXG4gICAgICBkZWxldGVDYXJkTW9kYWwub3BlblBvcHVwKCk7XHJcblxyXG4gICAgICBkZWxldGVDYXJkTW9kYWwuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZEluc3RhbmNlLl9yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRNb2RhbC5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgLChpZCkgPT4ge1xyXG4gICAgICBpZiAoIWNhcmRJbnN0YW5jZS5pc0xpa2VkQnlVc2VyKCkpIHtcclxuICAgICAgICBhcGkubGlrZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiBjYXJkSW5zdGFuY2UuY291bnRlckxpa2VzKHJlcy5saWtlcykpXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYXBpLnVubGlrZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiBjYXJkSW5zdGFuY2UuY291bnRlckxpa2VzKHJlcy5saWtlcykpXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHVzZXJJZCk7XHJcbiAgICBcclxuICAgIHJldHVybiBjYXJkSW5zdGFuY2UuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlTmV3Q2FyZChpdGVtLCBlbGVtZW50VGVtcGxhdGUpO1xyXG5cclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcbiAgfVxyXG59LCBwb3B1cENvbmZpZy5lbGVtZW50c0NvbnRhaW5lcik7XHJcblxyXG5cclxuaW1hZ2VQb3B1cE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkUGhvdG9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0QXZhdGFyUGhvdG9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVMaWtlIiwidXNlcklkIiwidXBkYXRlZExpa2VzIiwiX2xpa2VzIiwiX3VwZGF0ZUxpa2VzQ291bnQiLCJpc0xpa2VkQnlVc2VyIiwiX2xpa2VCdG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsInRvZ2dsZSIsInRoaXMiLCJfdGl0bGUiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlIiwiX3VzZXJJZCIsIl9oYW5kbGVMaWtlIiwiX2lkIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY291bnRlckxpa2VzIiwiX2RlbGV0ZUJ0biIsImRpc3BsYXkiLCJzb21lIiwidXNlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJlIiwia2V5IiwiY2xvc2VQb3B1cCIsIl9wb3B1cCIsIl9vcGVuUG9wdXBDbGFzcyIsIl9jbG9zZU92ZXJsYXlCeUVzYyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BpY0VsZW1lbnQiLCJfY2FwdGlvbnBpY0VsZW1lbnQiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuQ29udGVudCIsIl9zdWJtaXRGb3JtIiwiX2Zvcm0iLCJyZXNldCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwidGV4dFBvcHVwSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0UG9wdXBWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiZWxlbWVudCIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiX3JlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJpbm5lckhUTUwiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImNhcnJlclNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZSIsImNhcnJlciIsIl9jYXJyZXIiLCJhdmF0YXIiLCJfYXZhdGFyIiwiX25hbWVTZWxlY3RvciIsIl9jYXJyZXJTZWxlY3RvciIsIl9hdmF0YXJTZWxlY3RvciIsImZ1bGxOYW1lIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiX2NvbmZpZyIsImVycm9yQ2xhc3MiLCJlcnJvcklucHV0U2VsZWN0b3IiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9pbnB1dExpc3QiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImlucHV0U2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXROYW1lIiwiaW5wdXRDYXJlZXIiLCJuZXdQaG90b1RpdGxlIiwibmV3UGhvdG9VcmwiLCJpbnB1dEF2YXRhciIsImVkaXRGb3JtIiwiZWRpdEF2YXRhckZvcm0iLCJwb3B1cFBob3RvIiwiYWRkUGhvdG9Gb3JtIiwicG9wdXBDb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yU2V0IiwiaW1hZ2VNb2RhbFdpbmRvdyIsImVkaXRNb2RhbFdpbmRvdyIsImFkZFBob3RvTW9kYWxXaW5kb3ciLCJlZGl0QXZhdGFyTW9kYWxXaW5kb3ciLCJkZWxldGVDYXJkTW9kYWxXaW5kb3ciLCJlbGVtZW50c0NvbnRhaW5lciIsImVkaXRWYWxpZGF0b3IiLCJhZGRWYWxpZGF0b3IiLCJhdmF0YXJWYWxpZGF0b3IiLCJvcGVuUG9wdXAiLCJwb3B1cCIsImNsb3NlT3ZlcmxheUJ5RXNjIiwiaGFuZGxlUmVtb3RlQ2xpY2siLCJBcGkiLCJiYXNlVVJMIiwiaGVhZGVycyIsImZldGNoIiwiX2Jhc2VVUkwiLCJfaGVhZGVycyIsInRoZW4iLCJyZXMiLCJfZ2V0UmVzcG9uc2VEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJhYm91dCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJQb3B1cEZvckRlbGV0ZUNhcmQiLCJmdW5jIiwiX3N1Ym1pdEhhbmRsZXIiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJjYXJkcyIsInVzZXJEYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJjYXJkTGlzdCIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib3BlbkVkaXRQcm9maWxlUG9wdXBCdG4iLCJvcGVuQWRkQ2FyZFBvcHVwQnRuIiwib3BlbkVkaXRBdmF0YXJQb3B1cEJ0biIsImVkaXRQb3B1cEF2YXRhciIsImVsZW1lbnRUZW1wbGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJpbWFnZVBvcHVwTW9kYWwiLCJkZWxldGVDYXJkTW9kYWwiLCJlZGl0UHJvZmlsZVBvcHVwIiwic2hvd0xvYWRpbmdQcm9ncmVzcyIsImZpbmFsbHkiLCJvbkxvYWRGaW5pc2giLCJhZGRQaG90b1BvcHVwIiwiY3JlYXRlTmV3Q2FyZCIsIm5ld0NhcmQiLCJhZGRJdGVtIiwiZWRpdEF2YXRhclBob3RvUG9wdXAiLCJzZXRVc2VySW1hZ2UiLCJjYXJkSW5zdGFuY2UiLCJzZXRBY3Rpb24iLCJkZWxldGVDYXJkIiwiX3JlbW92ZUNhcmQiLCJ1bmxpa2VDYXJkIiwibGlrZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9